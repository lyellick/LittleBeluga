#include <Arduboy2.h>
#include <Sprites.h>
#include <ArduboyTones.h>

Arduboy2 arduboy;
ArduboyTones sound(arduboy.audio.enabled);
Sprites sprites;

const uint16_t score[] PROGMEM = {
 NOTE_GS5,272, NOTE_REST,136, NOTE_GS5,272, NOTE_FS5,136, NOTE_B4,136, NOTE_REST,136, NOTE_B4,136, NOTE_D5,136,
 NOTE_REST,136, NOTE_FS5,136, NOTE_GS5,272, NOTE_REST,136, NOTE_B4,136, NOTE_REST,272, NOTE_B4,136, NOTE_REST,272,
 NOTE_B4,136, NOTE_REST,272, NOTE_GS5,136, NOTE_GS5,136, NOTE_FS5,136, NOTE_B5,136, NOTE_REST,136, NOTE_B5,681,
 NOTE_A5,136, NOTE_GS5,136, NOTE_GS5,272, NOTE_REST,136, NOTE_FS5,272, NOTE_REST,136, NOTE_FS5,545, NOTE_DS5,136,
 NOTE_REST,136, NOTE_B4,136, NOTE_REST,136, NOTE_A5,136, NOTE_A5,136, NOTE_A5,136, NOTE_A5,136, NOTE_REST,136,
 NOTE_DS5,272, NOTE_B4,136, NOTE_B4,136, NOTE_REST,136, NOTE_A5,136, NOTE_A5,136, NOTE_REST,136, NOTE_AS5,136,
 NOTE_A5,136, NOTE_FS5,136, NOTE_FS5,136, NOTE_FS4,136, NOTE_REST,136, NOTE_B5,136, NOTE_B5,136, NOTE_B5,272,
 NOTE_B5,136, NOTE_B5,136, NOTE_REST,136, NOTE_A5,136, NOTE_A5,136, NOTE_GS5,136, NOTE_GS5,136, NOTE_REST,272,
 NOTE_AS5,136, NOTE_AS5,136, NOTE_REST,136, NOTE_E5,409, NOTE_E5,136, NOTE_E5,272, NOTE_FS5,136, NOTE_E5,136,
 NOTE_E5,136, NOTE_B4,136, NOTE_REST,272, NOTE_E5,136, NOTE_REST,545, NOTE_REST,136, NOTE_B4,136, NOTE_REST,136,
 NOTE_REST,136, NOTE_E5,136, NOTE_E5,136, NOTE_REST,136, NOTE_E5,136, NOTE_REST,272, NOTE_B5,136, NOTE_CS5,136,
 NOTE_REST,136, NOTE_D6,136, NOTE_D6,136, NOTE_REST,272, NOTE_CS5,136, NOTE_REST,272, NOTE_E5,136, NOTE_REST,272,
 NOTE_B4,136, NOTE_B5,272, NOTE_B4,136, NOTE_REST,136, NOTE_REST,136, NOTE_B4,136, NOTE_REST,136, NOTE_REST,136,
 NOTE_E5,136, NOTE_REST,272, NOTE_B4,136, NOTE_B5,272, NOTE_GS5,409, NOTE_GS5,136, NOTE_REST,272, NOTE_FS5,136,
 NOTE_REST,136, NOTE_GS5,136, NOTE_AS5,136, NOTE_AS5,136, NOTE_FS5,136, NOTE_CS5,136, NOTE_REST,272, NOTE_AS5,136,
 NOTE_REST,272, NOTE_CS6,136, NOTE_REST,136, NOTE_GS5,136, NOTE_AS5,136, NOTE_AS5,136, NOTE_FS5,136, NOTE_GS5,136,
 NOTE_GS5,136, NOTE_REST,136, NOTE_CS6,136, NOTE_CS6,136, NOTE_REST,136, NOTE_B5,409, NOTE_B5,136, NOTE_B5,136,
 NOTE_REST,136, NOTE_DS5,136, NOTE_DS5,136, NOTE_DS5,136, NOTE_REST,409, NOTE_CS5,409, NOTE_REST,409, NOTE_AS5,272,
 NOTE_AS5,136,
 TONES_REPEAT
};

void setup() {
  arduboy.begin();
  arduboy.setFrameRate(60);
}

void loop() {
  if (!arduboy.nextFrame()) {
      return;
  }

  arduboy.pollButtons();

  uint8_t button = arduboy.buttonsState();

  sound.tones(score);

  arduboy.display(CLEAR_BUFFER);
}